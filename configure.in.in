AC_OUTPUT([ libkipi/libkipi.pc ])
KDE_ENABLE_HIDDEN_VISIBILITY


AC_LANG_PUSH(C++)
libkipi_kdemacros_cppflags=$CPPFLAGS
CPPFLAGS="$CPPFLAGS $all_includes"  
AC_MSG_CHECKING([if kdemacros.h is usable])
AC_COMPILE_IFELSE(
 [
   #include <kdemacros.h>
   #include <string>
   int other_func( void ) KDE_EXPORT;
   int other_func( void )
   { 
      std::string s("KDE_EXPORT");
      return 0;
   }
 ], 
 [ AC_MSG_RESULT([yes])
   AC_DEFINE(KDEMACROS_USABLE, 1, [kdemacros.h usable]) ], 
 [ AC_MSG_RESULT([no]) ] 
)
CPPFLAGS=$libkipi_kdemacros_cppflags
AC_LANG_POP(C++)
AM_CONFIG_HEADER([ libkipi/libkipi/libkipi_export.h ])
